###############################################################################
#
# IAR ANSI C/C++ Compiler V7.70.2.11706/W32 for ARM       22/Dec/2017  10:34:27
# Copyright 1999-2016 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        C:\Users\prasa\Documents\1.0.0\sources\Invn\Devices\Drivers\Icm20948\Icm20948Augmented.c
#    Command line =  
#        C:\Users\prasa\Documents\1.0.0\sources\Invn\Devices\Drivers\Icm20948\Icm20948Augmented.c
#        -D IAR_COMPILER -D __inline=inline -D INV_MSG_ENABLE -D ASSERT -D
#        NUCLEO -D USE_STDPERIPH_DRIVER -D USE_HSE_BYPASS -D HSE_VALUE=8000000
#        -D STM32F411xE -lC
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948\build\example-icm20948\list
#        --diag_suppress Pa050 -o
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948\build\example-icm20948\obj
#        --no_unroll --no_inline --no_tbaa --no_scheduling --debug
#        --endian=little --cpu=Cortex-M4 --silent --warnings_are_errors -e
#        --char_is_signed --fpu=VFPv4_sp --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\INC\c\DLib_Config_Normal.h" -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../\
#        -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../board-hal\
#        -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../stm32f4x/CMSIS/Core\
#        -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../stm32f4x/CMSIS/Device\
#        -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../stm32f4x/STM32F4xx_StdPeriph_Driver/inc\
#        -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../Invn/Images\
#        -I
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948/../../Invn/DynamicProtocol\
#        -Om --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.5\arm\CMSIS\Include\"
#    Locale       =  English_United States.1252
#    List file    =  
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948\build\example-icm20948\list\Icm20948Augmented.lst
#    Object file  =  
#        C:\Users\prasa\Documents\1.0.0\sources\examples\example-icm20948\build\example-icm20948\obj\Icm20948Augmented.o
#
###############################################################################

C:\Users\prasa\Documents\1.0.0\sources\Invn\Devices\Drivers\Icm20948\Icm20948Augmented.c
      1          /*
      2          * ________________________________________________________________________________________________________
      3          * Copyright © 2014-2015 InvenSense Inc. Portions Copyright © 2014-2015 Movea. All rights reserved.
      4          * This software, related documentation and any modifications thereto (collectively “Software”) is subject
      5          * to InvenSense and its licensors' intellectual property rights under U.S. and international copyright and
      6          * other intellectual property rights laws.
      7          * InvenSense and its licensors retain all intellectual property and proprietary rights in and to the Software
      8          * and any use, reproduction, disclosure or distribution of the Software without an express license
      9          * agreement from InvenSense is strictly prohibited.
     10          * ________________________________________________________________________________________________________
     11          */
     12          
     13          #include "Icm20948.h"
     14          #include "Icm20948Augmented.h"
     15          #include "Icm20948DataConverter.h"
     16          
     17          #include "Icm20948DataBaseControl.h"
     18          
     19          // Determine the fastest ODR for all gravity-based sensors
     20          #define AUGMENTED_SENSOR_GET_6QUAT_MIN_ODR(s, newOdr) \
     21          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_GRAVITY)) \
     22          		newOdr = MIN(s->sGravityOdrMs,newOdr); \
     23          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_GAME_ROTATION_VECTOR)) \
     24          		newOdr = MIN(s->sGrvOdrMs,newOdr);  \
     25          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_LINEAR_ACCELERATION)) \
     26          		newOdr = MIN(s->sLinAccOdrMs,newOdr);
     27          #define AUGMENTED_SENSOR_GET_6QUATWU_MIN_ODR(s, newOdr) \
     28          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_WAKEUP_GRAVITY)) \
     29          		newOdr = MIN(s->sGravityWuOdrMs,newOdr); \
     30          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_WAKEUP_GAME_ROTATION_VECTOR)) \
     31          		newOdr = MIN(s->sGrvWuOdrMs,newOdr);  \
     32          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_WAKEUP_LINEAR_ACCELERATION)) \
     33          		newOdr = MIN(s->sLinAccWuOdrMs,newOdr);
     34          
     35          // Determine the fastest ODR for all rotation vector-based sensors
     36          #define AUGMENTED_SENSOR_GET_9QUAT_MIN_ODR(s, newOdr) \
     37          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_ORIENTATION)) \
     38          		newOdr = MIN(s->sOriOdrMs,newOdr); \
     39          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_ROTATION_VECTOR)) \
     40          		newOdr = MIN(s->sRvOdrMs,newOdr);
     41          #define AUGMENTED_SENSOR_GET_9QUATWU_MIN_ODR(s, newOdr) \
     42          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_WAKEUP_ORIENTATION)) \
     43          		newOdr = MIN(s->sOriWuOdrMs,newOdr); \
     44          	if	(inv_icm20948_ctrl_androidSensor_enabled	(s, ANDROID_SENSOR_WAKEUP_ROTATION_VECTOR)) \
     45          		newOdr = MIN(s->sRvWuOdrMs,newOdr);
     46          

   \                                 In section .text, align 2, keep-with-next
     47          int inv_icm20948_augmented_init(struct inv_icm20948 * s)
     48          {
     49          	// ODR expected for gravity-based sensors
     50          	s->sGravityOdrMs = 0xFFFF;
   \                     inv_icm20948_augmented_init: (+1)
   \   00000000   0xF200 0x40DE      ADDW     R0,R0,#+1246
   \   00000004   0xF64F 0x71FF      MOVW     R1,#+65535
   \   00000008   0x8001             STRH     R1,[R0, #+0]
     51          	s->sGrvOdrMs = 0xFFFF;
   \   0000000A   0x8041             STRH     R1,[R0, #+2]
     52          	s->sLinAccOdrMs = 0xFFFF;
   \   0000000C   0x8081             STRH     R1,[R0, #+4]
     53          	s->sGravityWuOdrMs = 0xFFFF;
   \   0000000E   0x80C1             STRH     R1,[R0, #+6]
     54          	s->sGrvWuOdrMs = 0xFFFF;
   \   00000010   0x8101             STRH     R1,[R0, #+8]
     55          	s->sLinAccWuOdrMs = 0xFFFF;
   \   00000012   0x8141             STRH     R1,[R0, #+10]
     56          	// ODR expected for rotation vector-based sensors
     57          	s->sRvOdrMs = 0xFFFF;
   \   00000014   0x8181             STRH     R1,[R0, #+12]
     58          	s->sOriOdrMs = 0xFFFF;
   \   00000016   0x81C1             STRH     R1,[R0, #+14]
     59          	s->sRvWuOdrMs = 0xFFFF;
   \   00000018   0x8201             STRH     R1,[R0, #+16]
     60          	s->sOriWuOdrMs = 0xFFFF;
   \   0000001A   0x8241             STRH     R1,[R0, #+18]
     61          	
     62          	return 0;
   \   0000001C   0x2000             MOVS     R0,#+0
   \   0000001E   0x4770             BX       LR               ;; return
     63          }
     64          

   \                                 In section .text, align 2, keep-with-next
     65          int inv_icm20948_augmented_sensors_get_gravity(struct inv_icm20948 * s, long gravity[3], const long quat6axis_3e[3])
     66          {
   \                     inv_icm20948_augmented_sensors_get_gravity: (+1)
   \   00000000   0xB570             PUSH     {R4-R6,LR}
   \   00000002   0xB088             SUB      SP,SP,#+32
   \   00000004   0x4605             MOV      R5,R0
   \   00000006   0x460C             MOV      R4,R1
   \   00000008   0x4610             MOV      R0,R2
     67          	long quat6axis_4e[4];
     68          	long quat6axis_4e_body_to_world[4];
     69          
     70          	if(!gravity) return -1;
   \   0000000A   0x2C00             CMP      R4,#+0
   \   0000000C   0xD102             BNE.N    ??inv_icm20948_augmented_sensors_get_gravity_0
   \   0000000E   0xF04F 0x30FF      MOV      R0,#-1
   \   00000012   0xE03E             B.N      ??inv_icm20948_augmented_sensors_get_gravity_1
     71          	if(!quat6axis_3e) return -1;
   \                     ??inv_icm20948_augmented_sensors_get_gravity_0: (+1)
   \   00000014   0x2800             CMP      R0,#+0
   \   00000016   0xD102             BNE.N    ??inv_icm20948_augmented_sensors_get_gravity_2
   \   00000018   0xF04F 0x30FF      MOV      R0,#-1
   \   0000001C   0xE039             B.N      ??inv_icm20948_augmented_sensors_get_gravity_1
     72          
     73          	// compute w element
     74          	inv_icm20948_convert_compute_scalar_part_fxp(quat6axis_3e, quat6axis_4e);
   \                     ??inv_icm20948_augmented_sensors_get_gravity_2: (+1)
   \   0000001E   0xA904             ADD      R1,SP,#+16
   \   00000020   0x.... 0x....      BL       inv_icm20948_convert_compute_scalar_part_fxp
     75          	// apply mounting matrix
     76          	inv_icm20948_q_mult_q_qi(quat6axis_4e, s->s_quat_chip_to_body, quat6axis_4e_body_to_world);
   \   00000024   0x466A             MOV      R2,SP
   \   00000026   0xF105 0x01A8      ADD      R1,R5,#+168
   \   0000002A   0xA804             ADD      R0,SP,#+16
   \   0000002C   0x.... 0x....      BL       inv_icm20948_q_mult_q_qi
     77          
     78          	gravity[0] = ( 2 * inv_icm20948_convert_mult_qfix_fxp(quat6axis_4e_body_to_world[1], quat6axis_4e_body_to_world[3], 30) - 
     79          	               2 * inv_icm20948_convert_mult_qfix_fxp(quat6axis_4e_body_to_world[0], quat6axis_4e_body_to_world[2], 30) ) >> (30 - 16);
   \   00000030   0x466D             MOV      R5,SP
   \   00000032   0x221E             MOVS     R2,#+30
   \   00000034   0x68E9             LDR      R1,[R5, #+12]
   \   00000036   0x6868             LDR      R0,[R5, #+4]
   \   00000038   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   0000003C   0x4606             MOV      R6,R0
   \   0000003E   0x221E             MOVS     R2,#+30
   \   00000040   0x68A9             LDR      R1,[R5, #+8]
   \   00000042   0x9800             LDR      R0,[SP, #+0]
   \   00000044   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   00000048   0x1A30             SUBS     R0,R6,R0
   \   0000004A   0x0040             LSLS     R0,R0,#+1
   \   0000004C   0x1380             ASRS     R0,R0,#+14
   \   0000004E   0x6020             STR      R0,[R4, #+0]
     80          	gravity[1] = ( 2 * inv_icm20948_convert_mult_qfix_fxp(quat6axis_4e_body_to_world[2], quat6axis_4e_body_to_world[3], 30) + 
     81          	               2 * inv_icm20948_convert_mult_qfix_fxp(quat6axis_4e_body_to_world[0], quat6axis_4e_body_to_world[1], 30) ) >> (30 - 16);
   \   00000050   0x221E             MOVS     R2,#+30
   \   00000052   0x68E9             LDR      R1,[R5, #+12]
   \   00000054   0x68A8             LDR      R0,[R5, #+8]
   \   00000056   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   0000005A   0x4606             MOV      R6,R0
   \   0000005C   0x221E             MOVS     R2,#+30
   \   0000005E   0x6869             LDR      R1,[R5, #+4]
   \   00000060   0x9800             LDR      R0,[SP, #+0]
   \   00000062   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   00000066   0x1980             ADDS     R0,R0,R6
   \   00000068   0x0040             LSLS     R0,R0,#+1
   \   0000006A   0x1380             ASRS     R0,R0,#+14
   \   0000006C   0x6060             STR      R0,[R4, #+4]
     82          	gravity[2] = ( (1 << 30) - 2 * inv_icm20948_convert_mult_qfix_fxp(quat6axis_4e_body_to_world[1], quat6axis_4e_body_to_world[1], 30) - 
     83          	                2 * inv_icm20948_convert_mult_qfix_fxp(quat6axis_4e_body_to_world[2], quat6axis_4e_body_to_world[2], 30) ) >> (30 - 16);
   \   0000006E   0x6869             LDR      R1,[R5, #+4]
   \   00000070   0x221E             MOVS     R2,#+30
   \   00000072   0x4608             MOV      R0,R1
   \   00000074   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   00000078   0x4606             MOV      R6,R0
   \   0000007A   0x68A8             LDR      R0,[R5, #+8]
   \   0000007C   0x221E             MOVS     R2,#+30
   \   0000007E   0x4601             MOV      R1,R0
   \   00000080   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   00000084   0x1980             ADDS     R0,R0,R6
   \   00000086   0x0040             LSLS     R0,R0,#+1
   \   00000088   0xF1C0 0x4080      RSB      R0,R0,#+1073741824
   \   0000008C   0x1380             ASRS     R0,R0,#+14
   \   0000008E   0x60A0             STR      R0,[R4, #+8]
     84          
     85          	return MPU_SUCCESS;
   \   00000090   0x2000             MOVS     R0,#+0
   \                     ??inv_icm20948_augmented_sensors_get_gravity_1: (+1)
   \   00000092   0xB008             ADD      SP,SP,#+32
   \   00000094   0xBD70             POP      {R4-R6,PC}       ;; return
     86          }
     87          

   \                                 In section .text, align 2, keep-with-next
     88          int inv_icm20948_augmented_sensors_get_linearacceleration(long linacc[3], const long gravity[3], const long accel[3])
     89          {
   \                     inv_icm20948_augmented_sensors_get_linearacceleration: (+1)
   \   00000000   0xB410             PUSH     {R4}
     90              if(!linacc) return -1;
   \   00000002   0x2800             CMP      R0,#+0
   \   00000004   0xD102             BNE.N    ??inv_icm20948_augmented_sensors_get_linearacce_0
   \   00000006   0xF04F 0x30FF      MOV      R0,#-1
   \   0000000A   0xE016             B.N      ??inv_icm20948_augmented_sensors_get_linearacce_1
     91              if(!gravity) return -1;
   \                     ??inv_icm20948_augmented_sensors_get_linearacce_0: (+1)
   \   0000000C   0x2900             CMP      R1,#+0
   \   0000000E   0xD102             BNE.N    ??inv_icm20948_augmented_sensors_get_linearacce_2
   \   00000010   0xF04F 0x30FF      MOV      R0,#-1
   \   00000014   0xE011             B.N      ??inv_icm20948_augmented_sensors_get_linearacce_1
     92              if(!accel) return -1;
   \                     ??inv_icm20948_augmented_sensors_get_linearacce_2: (+1)
   \   00000016   0x2A00             CMP      R2,#+0
   \   00000018   0xD102             BNE.N    ??inv_icm20948_augmented_sensors_get_linearacce_3
   \   0000001A   0xF04F 0x30FF      MOV      R0,#-1
   \   0000001E   0xE00C             B.N      ??inv_icm20948_augmented_sensors_get_linearacce_1
     93              
     94              linacc[0] = accel[0] - gravity[0];
   \                     ??inv_icm20948_augmented_sensors_get_linearacce_3: (+1)
   \   00000020   0x6813             LDR      R3,[R2, #+0]
   \   00000022   0x680C             LDR      R4,[R1, #+0]
   \   00000024   0x1B1B             SUBS     R3,R3,R4
   \   00000026   0x6003             STR      R3,[R0, #+0]
     95              linacc[1] = accel[1] - gravity[1];
   \   00000028   0x6853             LDR      R3,[R2, #+4]
   \   0000002A   0x684C             LDR      R4,[R1, #+4]
   \   0000002C   0x1B1B             SUBS     R3,R3,R4
   \   0000002E   0x6043             STR      R3,[R0, #+4]
     96              linacc[2] = accel[2] - gravity[2];
   \   00000030   0x6892             LDR      R2,[R2, #+8]
   \   00000032   0x6889             LDR      R1,[R1, #+8]
   \   00000034   0x1A51             SUBS     R1,R2,R1
   \   00000036   0x6081             STR      R1,[R0, #+8]
     97                              
     98              return MPU_SUCCESS;
   \   00000038   0x2000             MOVS     R0,#+0
   \                     ??inv_icm20948_augmented_sensors_get_linearacce_1: (+1)
   \   0000003A   0xBC10             POP      {R4}
   \   0000003C   0x4770             BX       LR               ;; return
     99          }
    100          
    101          

   \                                 In section .text, align 2, keep-with-next
    102          int inv_icm20948_augmented_sensors_get_orientation(long orientation[3], const long quat9axis_3e[4])
    103          {
   \                     inv_icm20948_augmented_sensors_get_orientation: (+1)
   \   00000000   0xB570             PUSH     {R4-R6,LR}
   \   00000002   0xB08E             SUB      SP,SP,#+56
   \   00000004   0x4604             MOV      R4,R0
   \   00000006   0x4608             MOV      R0,R1
    104              long lQuat9axis4e[4];
    105          	long lMatrixQ30[9];       
    106          	long lMatrixQ30Square; 
    107          	long lRad2degQ16 = 0x394BB8; // (float)(180.0 / 3.14159265358979) in Q16
    108              
    109              if(!orientation) return -1;
   \   00000008   0x2C00             CMP      R4,#+0
   \   0000000A   0xD001             BEQ.N    ??inv_icm20948_augmented_sensors_get_orientatio_0
    110              if(!quat9axis_3e) return -1;
   \   0000000C   0x2800             CMP      R0,#+0
   \   0000000E   0xD102             BNE.N    ??inv_icm20948_augmented_sensors_get_orientatio_1
   \                     ??inv_icm20948_augmented_sensors_get_orientatio_0: (+1)
   \   00000010   0xF04F 0x30FF      MOV      R0,#-1
   \   00000014   0xE040             B.N      ??inv_icm20948_augmented_sensors_get_orientatio_2
    111              
    112              // compute w element
    113          	inv_icm20948_convert_compute_scalar_part_fxp(quat9axis_3e, lQuat9axis4e);
   \                     ??inv_icm20948_augmented_sensors_get_orientatio_1: (+1)
   \   00000016   0xA909             ADD      R1,SP,#+36
   \   00000018   0x.... 0x....      BL       inv_icm20948_convert_compute_scalar_part_fxp
    114              
    115          	// quaternion to a rotation matrix, q30 to q30
    116          	inv_icm20948_convert_quat_to_col_major_matrix_fxp((const long *)lQuat9axis4e, (long *)lMatrixQ30);
   \   0000001C   0x4669             MOV      R1,SP
   \   0000001E   0xA809             ADD      R0,SP,#+36
   \   00000020   0x.... 0x....      BL       inv_icm20948_convert_quat_to_col_major_matrix_fxp
    117          
    118          	// compute orientation in q16
    119          	// orientationFlt[0] = atan2f(-matrixFlt[1][0], matrixFlt[0][0]) * rad2deg;
    120          	orientation[0] = inv_icm20948_math_atan2_q15_fxp(-lMatrixQ30[3] >> 15, lMatrixQ30[0] >> 15) << 1;
   \   00000024   0x9800             LDR      R0,[SP, #+0]
   \   00000026   0x13C1             ASRS     R1,R0,#+15
   \   00000028   0x9803             LDR      R0,[SP, #+12]
   \   0000002A   0x4240             RSBS     R0,R0,#+0
   \   0000002C   0x13C0             ASRS     R0,R0,#+15
   \   0000002E   0x.... 0x....      BL       inv_icm20948_math_atan2_q15_fxp
   \   00000032   0x0040             LSLS     R0,R0,#+1
   \   00000034   0x6020             STR      R0,[R4, #+0]
    121          	orientation[0] = inv_icm20948_convert_mult_qfix_fxp(orientation[0], lRad2degQ16, 16);
   \   00000036   0x....             LDR.N    R5,??DataTable0  ;; 0x394bb8
   \   00000038   0x2210             MOVS     R2,#+16
   \   0000003A   0x4629             MOV      R1,R5
   \   0000003C   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   00000040   0x6020             STR      R0,[R4, #+0]
    122          
    123          	// orientationFlt[1] = atan2f(-matrixFlt[2][1], matrixFlt[2][2]) * rad2deg;
    124          	orientation[1] = inv_icm20948_math_atan2_q15_fxp(-lMatrixQ30[7] >> 15, lMatrixQ30[8] >> 15) << 1;
   \   00000042   0x9808             LDR      R0,[SP, #+32]
   \   00000044   0x13C1             ASRS     R1,R0,#+15
   \   00000046   0x9807             LDR      R0,[SP, #+28]
   \   00000048   0x4240             RSBS     R0,R0,#+0
   \   0000004A   0x13C0             ASRS     R0,R0,#+15
   \   0000004C   0x.... 0x....      BL       inv_icm20948_math_atan2_q15_fxp
   \   00000050   0x0040             LSLS     R0,R0,#+1
   \   00000052   0x6060             STR      R0,[R4, #+4]
    125          	orientation[1] = inv_icm20948_convert_mult_qfix_fxp(orientation[1], lRad2degQ16, 16);
   \   00000054   0x2210             MOVS     R2,#+16
   \   00000056   0x4629             MOV      R1,R5
   \   00000058   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   0000005C   0x6060             STR      R0,[R4, #+4]
    126          
    127          	// orientationFlt[2] = asinf ( matrixFlt[2][0]) * rad2deg;
    128          	// asin(x) = atan (x/sqrt(1-x²))
    129          	// atan2(y,x) = atan(y/x)
    130          	// asin(x) = atan2(x, sqrt(1-x²))
    131          	lMatrixQ30Square = inv_icm20948_convert_mult_qfix_fxp(lMatrixQ30[6], lMatrixQ30[6], 30); // x²
   \   0000005E   0x466E             MOV      R6,SP
   \   00000060   0x69B1             LDR      R1,[R6, #+24]
   \   00000062   0x221E             MOVS     R2,#+30
   \   00000064   0x4608             MOV      R0,R1
   \   00000066   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
    132          	lMatrixQ30Square = (1UL << 30) - lMatrixQ30Square; // 1-x²
    133          	lMatrixQ30Square = inv_icm20948_convert_fast_sqrt_fxp(lMatrixQ30Square); // sqrt(1-x²)
   \   0000006A   0xF1C0 0x4080      RSB      R0,R0,#+1073741824
   \   0000006E   0x.... 0x....      BL       inv_icm20948_convert_fast_sqrt_fxp
    134          	orientation[2] = inv_icm20948_math_atan2_q15_fxp(lMatrixQ30[6] >> 15,  lMatrixQ30Square >> 15) << 1; // atan2(x, sqrt(1-x²))
   \   00000072   0x13C1             ASRS     R1,R0,#+15
   \   00000074   0x69B0             LDR      R0,[R6, #+24]
   \   00000076   0x13C0             ASRS     R0,R0,#+15
   \   00000078   0x.... 0x....      BL       inv_icm20948_math_atan2_q15_fxp
   \   0000007C   0x0040             LSLS     R0,R0,#+1
   \   0000007E   0x60A0             STR      R0,[R4, #+8]
    135          	orientation[2] = inv_icm20948_convert_mult_qfix_fxp(orientation[2], lRad2degQ16, 16); // * rad2deg
   \   00000080   0x2210             MOVS     R2,#+16
   \   00000082   0x4629             MOV      R1,R5
   \   00000084   0x.... 0x....      BL       inv_icm20948_convert_mult_qfix_fxp
   \   00000088   0x60A0             STR      R0,[R4, #+8]
    136          
    137          	if (orientation[0] < 0)
   \   0000008A   0x6820             LDR      R0,[R4, #+0]
   \   0000008C   0x2800             CMP      R0,#+0
   \   0000008E   0xD502             BPL.N    ??inv_icm20948_augmented_sensors_get_orientatio_3
    138          		orientation[0] += 360UL << 16;
   \   00000090   0xF100 0x70B4      ADD      R0,R0,#+23592960
   \   00000094   0x6020             STR      R0,[R4, #+0]
    139          
    140              return MPU_SUCCESS;
   \                     ??inv_icm20948_augmented_sensors_get_orientatio_3: (+1)
   \   00000096   0x2000             MOVS     R0,#+0
   \                     ??inv_icm20948_augmented_sensors_get_orientatio_2: (+1)
   \   00000098   0xB00E             ADD      SP,SP,#+56
   \   0000009A   0xBD70             POP      {R4-R6,PC}       ;; return
    141          }
    142          

   \                                 In section .text, align 2, keep-with-next
    143          unsigned short inv_icm20948_augmented_sensors_set_odr(struct inv_icm20948 * s, unsigned char androidSensor, unsigned short delayInMs)
    144          {
   \                     inv_icm20948_augmented_sensors_set_odr: (+1)
   \   00000000   0xB570             PUSH     {R4-R6,LR}
   \   00000002   0x4604             MOV      R4,R0
   \   00000004   0x4615             MOV      R5,R2
    145          	switch(androidSensor)
   \   00000006   0x2903             CMP      R1,#+3
   \   00000008   0xF000 0x8094      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_0
   \   0000000C   0x2909             CMP      R1,#+9
   \   0000000E   0xD016             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_1
   \   00000010   0x290A             CMP      R1,#+10
   \   00000012   0xD066             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_2
   \   00000014   0x290B             CMP      R1,#+11
   \   00000016   0xF000 0x80AA      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_3
   \   0000001A   0x290F             CMP      R1,#+15
   \   0000001C   0xD038             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_4
   \   0000001E   0x2919             CMP      R1,#+25
   \   00000020   0xF000 0x8139      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_5
   \   00000024   0x291D             CMP      R1,#+29
   \   00000026   0xF000 0x80BF      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_6
   \   0000002A   0x291E             CMP      R1,#+30
   \   0000002C   0xF000 0x810C      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_7
   \   00000030   0x291F             CMP      R1,#+31
   \   00000032   0xF000 0x814B      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_8
   \   00000036   0x2923             CMP      R1,#+35
   \   00000038   0xF000 0x80DF      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_9
   \   0000003C   0xE160             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    146          	{
    147          		case ANDROID_SENSOR_GRAVITY:
    148          			s->sGravityOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_1: (+1)
   \   0000003E   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   00000042   0x8035             STRH     R5,[R6, #+0]
    149          			AUGMENTED_SENSOR_GET_6QUAT_MIN_ODR(s, delayInMs);
   \   00000044   0x2109             MOVS     R1,#+9
   \   00000046   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000004A   0x2800             CMP      R0,#+0
   \   0000004C   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_11
   \   0000004E   0x8830             LDRH     R0,[R6, #+0]
   \   00000050   0x4629             MOV      R1,R5
   \   00000052   0x4605             MOV      R5,R0
   \   00000054   0x428D             CMP      R5,R1
   \   00000056   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_11
   \   00000058   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_11: (+1)
   \   0000005A   0x210F             MOVS     R1,#+15
   \   0000005C   0x4620             MOV      R0,R4
   \   0000005E   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000062   0x2800             CMP      R0,#+0
   \   00000064   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_12
   \   00000066   0x8870             LDRH     R0,[R6, #+2]
   \   00000068   0x4629             MOV      R1,R5
   \   0000006A   0x4605             MOV      R5,R0
   \   0000006C   0x428D             CMP      R5,R1
   \   0000006E   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_12
   \   00000070   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_12: (+1)
   \   00000072   0x210A             MOVS     R1,#+10
   \   00000074   0x4620             MOV      R0,R4
   \   00000076   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000007A   0x2800             CMP      R0,#+0
   \   0000007C   0xF000 0x8140      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000080   0x88B0             LDRH     R0,[R6, #+4]
   \   00000082   0x4629             MOV      R1,R5
   \   00000084   0x4605             MOV      R5,R0
   \   00000086   0x428D             CMP      R5,R1
   \   00000088   0xF240 0x813A      BLS.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   0000008C   0x460D             MOV      R5,R1
   \   0000008E   0xE137             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    150          			break;
    151                  case ANDROID_SENSOR_GAME_ROTATION_VECTOR:
    152          			s->sGrvOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_4: (+1)
   \   00000090   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   00000094   0x8075             STRH     R5,[R6, #+2]
    153          			AUGMENTED_SENSOR_GET_6QUAT_MIN_ODR(s, delayInMs);
   \   00000096   0x2109             MOVS     R1,#+9
   \   00000098   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000009C   0x2800             CMP      R0,#+0
   \   0000009E   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_13
   \   000000A0   0x8830             LDRH     R0,[R6, #+0]
   \   000000A2   0x4629             MOV      R1,R5
   \   000000A4   0x4605             MOV      R5,R0
   \   000000A6   0x428D             CMP      R5,R1
   \   000000A8   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_13
   \   000000AA   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_13: (+1)
   \   000000AC   0x210F             MOVS     R1,#+15
   \   000000AE   0x4620             MOV      R0,R4
   \   000000B0   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000B4   0x2800             CMP      R0,#+0
   \   000000B6   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_14
   \   000000B8   0x8870             LDRH     R0,[R6, #+2]
   \   000000BA   0x4629             MOV      R1,R5
   \   000000BC   0x4605             MOV      R5,R0
   \   000000BE   0x428D             CMP      R5,R1
   \   000000C0   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_14
   \   000000C2   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_14: (+1)
   \   000000C4   0x210A             MOVS     R1,#+10
   \   000000C6   0x4620             MOV      R0,R4
   \   000000C8   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000CC   0x2800             CMP      R0,#+0
   \   000000CE   0xF000 0x8117      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000000D2   0x88B0             LDRH     R0,[R6, #+4]
   \   000000D4   0x4629             MOV      R1,R5
   \   000000D6   0x4605             MOV      R5,R0
   \   000000D8   0x428D             CMP      R5,R1
   \   000000DA   0xF240 0x8111      BLS.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000000DE   0x460D             MOV      R5,R1
   \   000000E0   0xE10E             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    154          			break;
    155                  case ANDROID_SENSOR_LINEAR_ACCELERATION:
    156          			s->sLinAccOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_2: (+1)
   \   000000E2   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   000000E6   0x80B5             STRH     R5,[R6, #+4]
    157          			AUGMENTED_SENSOR_GET_6QUAT_MIN_ODR(s, delayInMs);
   \   000000E8   0x2109             MOVS     R1,#+9
   \   000000EA   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000EE   0x2800             CMP      R0,#+0
   \   000000F0   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_15
   \   000000F2   0x8830             LDRH     R0,[R6, #+0]
   \   000000F4   0x4629             MOV      R1,R5
   \   000000F6   0x4605             MOV      R5,R0
   \   000000F8   0x428D             CMP      R5,R1
   \   000000FA   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_15
   \   000000FC   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_15: (+1)
   \   000000FE   0x210F             MOVS     R1,#+15
   \   00000100   0x4620             MOV      R0,R4
   \   00000102   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000106   0x2800             CMP      R0,#+0
   \   00000108   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_16
   \   0000010A   0x8870             LDRH     R0,[R6, #+2]
   \   0000010C   0x4629             MOV      R1,R5
   \   0000010E   0x4605             MOV      R5,R0
   \   00000110   0x428D             CMP      R5,R1
   \   00000112   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_16
   \   00000114   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_16: (+1)
   \   00000116   0x210A             MOVS     R1,#+10
   \   00000118   0x4620             MOV      R0,R4
   \   0000011A   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000011E   0x2800             CMP      R0,#+0
   \   00000120   0xF000 0x80EE      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000124   0x88B0             LDRH     R0,[R6, #+4]
   \   00000126   0x4629             MOV      R1,R5
   \   00000128   0x4605             MOV      R5,R0
   \   0000012A   0x428D             CMP      R5,R1
   \   0000012C   0xF240 0x80E8      BLS.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000130   0x460D             MOV      R5,R1
   \   00000132   0xE0E5             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    158          			break;
    159                  case ANDROID_SENSOR_ORIENTATION:
    160          			s->sOriOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_0: (+1)
   \   00000134   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   00000138   0x81F5             STRH     R5,[R6, #+14]
    161          			AUGMENTED_SENSOR_GET_9QUAT_MIN_ODR(s, delayInMs);
   \   0000013A   0x2103             MOVS     R1,#+3
   \   0000013C   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000140   0x2800             CMP      R0,#+0
   \   00000142   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_17
   \   00000144   0x89F0             LDRH     R0,[R6, #+14]
   \   00000146   0x4629             MOV      R1,R5
   \   00000148   0x4605             MOV      R5,R0
   \   0000014A   0x428D             CMP      R5,R1
   \   0000014C   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_17
   \   0000014E   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_17: (+1)
   \   00000150   0x210B             MOVS     R1,#+11
   \   00000152   0x4620             MOV      R0,R4
   \   00000154   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000158   0x2800             CMP      R0,#+0
   \   0000015A   0xF000 0x80D1      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   0000015E   0x89B0             LDRH     R0,[R6, #+12]
   \   00000160   0x4629             MOV      R1,R5
   \   00000162   0x4605             MOV      R5,R0
   \   00000164   0x428D             CMP      R5,R1
   \   00000166   0xF240 0x80CB      BLS.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   0000016A   0x460D             MOV      R5,R1
   \   0000016C   0xE0C8             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    162          			break;
    163                  case ANDROID_SENSOR_ROTATION_VECTOR:
    164          			s->sRvOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_3: (+1)
   \   0000016E   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   00000172   0x81B5             STRH     R5,[R6, #+12]
    165          			AUGMENTED_SENSOR_GET_9QUAT_MIN_ODR(s, delayInMs);
   \   00000174   0x2103             MOVS     R1,#+3
   \   00000176   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000017A   0x2800             CMP      R0,#+0
   \   0000017C   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_18
   \   0000017E   0x89F0             LDRH     R0,[R6, #+14]
   \   00000180   0x4629             MOV      R1,R5
   \   00000182   0x4605             MOV      R5,R0
   \   00000184   0x428D             CMP      R5,R1
   \   00000186   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_18
   \   00000188   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_18: (+1)
   \   0000018A   0x210B             MOVS     R1,#+11
   \   0000018C   0x4620             MOV      R0,R4
   \   0000018E   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000192   0x2800             CMP      R0,#+0
   \   00000194   0xF000 0x80B4      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000198   0x89B0             LDRH     R0,[R6, #+12]
   \   0000019A   0x4629             MOV      R1,R5
   \   0000019C   0x4605             MOV      R5,R0
   \   0000019E   0x428D             CMP      R5,R1
   \   000001A0   0xF240 0x80AE      BLS.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000001A4   0x460D             MOV      R5,R1
   \   000001A6   0xE0AB             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    166          			break;
    167          		case ANDROID_SENSOR_WAKEUP_GRAVITY:
    168          			s->sGravityWuOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_6: (+1)
   \   000001A8   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   000001AC   0x80F5             STRH     R5,[R6, #+6]
    169          			AUGMENTED_SENSOR_GET_6QUATWU_MIN_ODR(s, delayInMs);
   \   000001AE   0x211D             MOVS     R1,#+29
   \   000001B0   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000001B4   0x2800             CMP      R0,#+0
   \   000001B6   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_19
   \   000001B8   0x88F0             LDRH     R0,[R6, #+6]
   \   000001BA   0x4629             MOV      R1,R5
   \   000001BC   0x4605             MOV      R5,R0
   \   000001BE   0x428D             CMP      R5,R1
   \   000001C0   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_19
   \   000001C2   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_19: (+1)
   \   000001C4   0x2123             MOVS     R1,#+35
   \   000001C6   0x4620             MOV      R0,R4
   \   000001C8   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000001CC   0x2800             CMP      R0,#+0
   \   000001CE   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_20
   \   000001D0   0x8930             LDRH     R0,[R6, #+8]
   \   000001D2   0x4629             MOV      R1,R5
   \   000001D4   0x4605             MOV      R5,R0
   \   000001D6   0x428D             CMP      R5,R1
   \   000001D8   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_20
   \   000001DA   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_20: (+1)
   \   000001DC   0x211E             MOVS     R1,#+30
   \   000001DE   0x4620             MOV      R0,R4
   \   000001E0   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000001E4   0x2800             CMP      R0,#+0
   \   000001E6   0xF000 0x808B      BEQ.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000001EA   0x8970             LDRH     R0,[R6, #+10]
   \   000001EC   0x4629             MOV      R1,R5
   \   000001EE   0x4605             MOV      R5,R0
   \   000001F0   0x428D             CMP      R5,R1
   \   000001F2   0xF240 0x8085      BLS.W    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000001F6   0x460D             MOV      R5,R1
   \   000001F8   0xE082             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    170          			break;
    171                  case ANDROID_SENSOR_WAKEUP_GAME_ROTATION_VECTOR:
    172          			s->sGrvWuOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_9: (+1)
   \   000001FA   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   000001FE   0x8135             STRH     R5,[R6, #+8]
    173          			AUGMENTED_SENSOR_GET_6QUATWU_MIN_ODR(s, delayInMs);
   \   00000200   0x211D             MOVS     R1,#+29
   \   00000202   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000206   0x2800             CMP      R0,#+0
   \   00000208   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_21
   \   0000020A   0x88F0             LDRH     R0,[R6, #+6]
   \   0000020C   0x4629             MOV      R1,R5
   \   0000020E   0x4605             MOV      R5,R0
   \   00000210   0x428D             CMP      R5,R1
   \   00000212   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_21
   \   00000214   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_21: (+1)
   \   00000216   0x2123             MOVS     R1,#+35
   \   00000218   0x4620             MOV      R0,R4
   \   0000021A   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000021E   0x2800             CMP      R0,#+0
   \   00000220   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_22
   \   00000222   0x8930             LDRH     R0,[R6, #+8]
   \   00000224   0x4629             MOV      R1,R5
   \   00000226   0x4605             MOV      R5,R0
   \   00000228   0x428D             CMP      R5,R1
   \   0000022A   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_22
   \   0000022C   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_22: (+1)
   \   0000022E   0x211E             MOVS     R1,#+30
   \   00000230   0x4620             MOV      R0,R4
   \   00000232   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000236   0x2800             CMP      R0,#+0
   \   00000238   0xD062             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   0000023A   0x8970             LDRH     R0,[R6, #+10]
   \   0000023C   0x4629             MOV      R1,R5
   \   0000023E   0x4605             MOV      R5,R0
   \   00000240   0x428D             CMP      R5,R1
   \   00000242   0xD95D             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000244   0x460D             MOV      R5,R1
   \   00000246   0xE05B             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    174          			break;
    175                  case ANDROID_SENSOR_WAKEUP_LINEAR_ACCELERATION:
    176          			s->sLinAccWuOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_7: (+1)
   \   00000248   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   0000024C   0x8175             STRH     R5,[R6, #+10]
    177          			AUGMENTED_SENSOR_GET_6QUATWU_MIN_ODR(s, delayInMs);
   \   0000024E   0x211D             MOVS     R1,#+29
   \   00000250   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000254   0x2800             CMP      R0,#+0
   \   00000256   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_23
   \   00000258   0x88F0             LDRH     R0,[R6, #+6]
   \   0000025A   0x4629             MOV      R1,R5
   \   0000025C   0x4605             MOV      R5,R0
   \   0000025E   0x428D             CMP      R5,R1
   \   00000260   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_23
   \   00000262   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_23: (+1)
   \   00000264   0x2123             MOVS     R1,#+35
   \   00000266   0x4620             MOV      R0,R4
   \   00000268   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000026C   0x2800             CMP      R0,#+0
   \   0000026E   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_24
   \   00000270   0x8930             LDRH     R0,[R6, #+8]
   \   00000272   0x4629             MOV      R1,R5
   \   00000274   0x4605             MOV      R5,R0
   \   00000276   0x428D             CMP      R5,R1
   \   00000278   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_24
   \   0000027A   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_24: (+1)
   \   0000027C   0x211E             MOVS     R1,#+30
   \   0000027E   0x4620             MOV      R0,R4
   \   00000280   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000284   0x2800             CMP      R0,#+0
   \   00000286   0xD03B             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000288   0x8970             LDRH     R0,[R6, #+10]
   \   0000028A   0x4629             MOV      R1,R5
   \   0000028C   0x4605             MOV      R5,R0
   \   0000028E   0x428D             CMP      R5,R1
   \   00000290   0xD936             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   00000292   0x460D             MOV      R5,R1
   \   00000294   0xE034             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    178          			break;
    179                  case ANDROID_SENSOR_WAKEUP_ORIENTATION:
    180          			s->sOriWuOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_5: (+1)
   \   00000296   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   0000029A   0x8275             STRH     R5,[R6, #+18]
    181          			AUGMENTED_SENSOR_GET_9QUATWU_MIN_ODR(s, delayInMs);
   \   0000029C   0x2119             MOVS     R1,#+25
   \   0000029E   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000002A2   0x2800             CMP      R0,#+0
   \   000002A4   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_25
   \   000002A6   0x8A70             LDRH     R0,[R6, #+18]
   \   000002A8   0x4629             MOV      R1,R5
   \   000002AA   0x4605             MOV      R5,R0
   \   000002AC   0x428D             CMP      R5,R1
   \   000002AE   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_25
   \   000002B0   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_25: (+1)
   \   000002B2   0x211F             MOVS     R1,#+31
   \   000002B4   0x4620             MOV      R0,R4
   \   000002B6   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000002BA   0x2800             CMP      R0,#+0
   \   000002BC   0xD020             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000002BE   0x8A30             LDRH     R0,[R6, #+16]
   \   000002C0   0x4629             MOV      R1,R5
   \   000002C2   0x4605             MOV      R5,R0
   \   000002C4   0x428D             CMP      R5,R1
   \   000002C6   0xD91B             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000002C8   0x460D             MOV      R5,R1
   \   000002CA   0xE019             B.N      ??inv_icm20948_augmented_sensors_set_odr_10
    182          			break;
    183                  case ANDROID_SENSOR_WAKEUP_ROTATION_VECTOR:
    184          			s->sRvWuOdrMs = delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_8: (+1)
   \   000002CC   0xF204 0x46DE      ADDW     R6,R4,#+1246
   \   000002D0   0x8235             STRH     R5,[R6, #+16]
    185          			AUGMENTED_SENSOR_GET_9QUATWU_MIN_ODR(s, delayInMs);
   \   000002D2   0x2119             MOVS     R1,#+25
   \   000002D4   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000002D8   0x2800             CMP      R0,#+0
   \   000002DA   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_26
   \   000002DC   0x8A70             LDRH     R0,[R6, #+18]
   \   000002DE   0x4629             MOV      R1,R5
   \   000002E0   0x4605             MOV      R5,R0
   \   000002E2   0x428D             CMP      R5,R1
   \   000002E4   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_26
   \   000002E6   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_set_odr_26: (+1)
   \   000002E8   0x211F             MOVS     R1,#+31
   \   000002EA   0x4620             MOV      R0,R4
   \   000002EC   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000002F0   0x2800             CMP      R0,#+0
   \   000002F2   0xD005             BEQ.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000002F4   0x8A30             LDRH     R0,[R6, #+16]
   \   000002F6   0x4629             MOV      R1,R5
   \   000002F8   0x4605             MOV      R5,R0
   \   000002FA   0x428D             CMP      R5,R1
   \   000002FC   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_set_odr_10
   \   000002FE   0x460D             MOV      R5,R1
    186          			break;
    187          		default :
    188          			break;
    189          	}
    190          
    191          	return delayInMs;
   \                     ??inv_icm20948_augmented_sensors_set_odr_10: (+1)
   \   00000300   0x4628             MOV      R0,R5
   \   00000302   0xBD70             POP      {R4-R6,PC}       ;; return
    192          }
    193          
    194          

   \                                 In section .text, align 2, keep-with-next
    195          void inv_icm20948_augmented_sensors_update_odr(struct inv_icm20948 * s, unsigned char androidSensor, unsigned short * updatedDelayPtr)
    196          {
   \                     inv_icm20948_augmented_sensors_update_odr: (+1)
   \   00000000   0xB5F8             PUSH     {R3-R7,LR}
   \   00000002   0x4606             MOV      R6,R0
   \   00000004   0x4614             MOV      R4,R2
    197          	unsigned short lDelayInMs = 0xFFFF; // max value of uint16_t, so that we can get min value of all enabled sensors
   \   00000006   0xF64F 0x77FF      MOVW     R7,#+65535
   \   0000000A   0x463D             MOV      R5,R7
    198          	switch(androidSensor)
   \   0000000C   0x2903             CMP      R1,#+3
   \   0000000E   0xD064             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_0
   \   00000010   0x2909             CMP      R1,#+9
   \   00000012   0xD010             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_1
   \   00000014   0x290A             CMP      R1,#+10
   \   00000016   0xD00E             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_1
   \   00000018   0x290B             CMP      R1,#+11
   \   0000001A   0xD05E             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_0
   \   0000001C   0x290F             CMP      R1,#+15
   \   0000001E   0xD00A             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_1
   \   00000020   0x2919             CMP      R1,#+25
   \   00000022   0xD075             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_2
   \   00000024   0x291D             CMP      R1,#+29
   \   00000026   0xD02F             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_3
   \   00000028   0x291E             CMP      R1,#+30
   \   0000002A   0xD02D             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_3
   \   0000002C   0x291F             CMP      R1,#+31
   \   0000002E   0xD06F             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_2
   \   00000030   0x2923             CMP      R1,#+35
   \   00000032   0xD029             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_3
   \   00000034   0xBDF1             POP      {R0,R4-R7,PC}
    199          	{
    200          		case ANDROID_SENSOR_GRAVITY:
    201                  case ANDROID_SENSOR_GAME_ROTATION_VECTOR:
    202                  case ANDROID_SENSOR_LINEAR_ACCELERATION:
    203          			AUGMENTED_SENSOR_GET_6QUAT_MIN_ODR(s, lDelayInMs);
   \                     ??inv_icm20948_augmented_sensors_update_odr_1: (+1)
   \   00000036   0x2109             MOVS     R1,#+9
   \   00000038   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000003C   0x2800             CMP      R0,#+0
   \   0000003E   0xD006             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_4
   \   00000040   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   00000044   0x8800             LDRH     R0,[R0, #+0]
   \   00000046   0x4601             MOV      R1,R0
   \   00000048   0x42B9             CMP      R1,R7
   \   0000004A   0xD000             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_4
   \   0000004C   0x4605             MOV      R5,R0
   \                     ??inv_icm20948_augmented_sensors_update_odr_4: (+1)
   \   0000004E   0x210F             MOVS     R1,#+15
   \   00000050   0x4630             MOV      R0,R6
   \   00000052   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000056   0x2800             CMP      R0,#+0
   \   00000058   0xD007             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_5
   \   0000005A   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   0000005E   0x8840             LDRH     R0,[R0, #+2]
   \   00000060   0x4629             MOV      R1,R5
   \   00000062   0x4605             MOV      R5,R0
   \   00000064   0x428D             CMP      R5,R1
   \   00000066   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_update_odr_5
   \   00000068   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_update_odr_5: (+1)
   \   0000006A   0x210A             MOVS     R1,#+10
   \   0000006C   0x4630             MOV      R0,R6
   \   0000006E   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000072   0x2800             CMP      R0,#+0
   \   00000074   0xD066             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   00000076   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   0000007A   0x8880             LDRH     R0,[R0, #+4]
   \   0000007C   0x4629             MOV      R1,R5
   \   0000007E   0x4605             MOV      R5,R0
   \   00000080   0x428D             CMP      R5,R1
   \   00000082   0xD95F             BLS.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   00000084   0x460D             MOV      R5,R1
   \   00000086   0xE05D             B.N      ??inv_icm20948_augmented_sensors_update_odr_6
    204          			*updatedDelayPtr = lDelayInMs;
    205          			break;
    206          		case ANDROID_SENSOR_WAKEUP_GRAVITY:
    207                  case ANDROID_SENSOR_WAKEUP_GAME_ROTATION_VECTOR:
    208                  case ANDROID_SENSOR_WAKEUP_LINEAR_ACCELERATION:
    209          			AUGMENTED_SENSOR_GET_6QUATWU_MIN_ODR(s, lDelayInMs);
   \                     ??inv_icm20948_augmented_sensors_update_odr_3: (+1)
   \   00000088   0x211D             MOVS     R1,#+29
   \   0000008A   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   0000008E   0x2800             CMP      R0,#+0
   \   00000090   0xD006             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_7
   \   00000092   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   00000096   0x88C0             LDRH     R0,[R0, #+6]
   \   00000098   0x4601             MOV      R1,R0
   \   0000009A   0x42B9             CMP      R1,R7
   \   0000009C   0xD000             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_7
   \   0000009E   0x4605             MOV      R5,R0
   \                     ??inv_icm20948_augmented_sensors_update_odr_7: (+1)
   \   000000A0   0x2123             MOVS     R1,#+35
   \   000000A2   0x4630             MOV      R0,R6
   \   000000A4   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000A8   0x2800             CMP      R0,#+0
   \   000000AA   0xD007             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_8
   \   000000AC   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   000000B0   0x8900             LDRH     R0,[R0, #+8]
   \   000000B2   0x4629             MOV      R1,R5
   \   000000B4   0x4605             MOV      R5,R0
   \   000000B6   0x428D             CMP      R5,R1
   \   000000B8   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_update_odr_8
   \   000000BA   0x460D             MOV      R5,R1
   \                     ??inv_icm20948_augmented_sensors_update_odr_8: (+1)
   \   000000BC   0x211E             MOVS     R1,#+30
   \   000000BE   0x4630             MOV      R0,R6
   \   000000C0   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000C4   0x2800             CMP      R0,#+0
   \   000000C6   0xD03D             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   000000C8   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   000000CC   0x8940             LDRH     R0,[R0, #+10]
   \   000000CE   0x4629             MOV      R1,R5
   \   000000D0   0x4605             MOV      R5,R0
   \   000000D2   0x428D             CMP      R5,R1
   \   000000D4   0xD936             BLS.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   000000D6   0x460D             MOV      R5,R1
   \   000000D8   0xE034             B.N      ??inv_icm20948_augmented_sensors_update_odr_6
    210          			*updatedDelayPtr = lDelayInMs;
    211          			break;
    212          		case ANDROID_SENSOR_ORIENTATION:
    213                  case ANDROID_SENSOR_ROTATION_VECTOR:
    214          			AUGMENTED_SENSOR_GET_9QUAT_MIN_ODR(s, lDelayInMs);
   \                     ??inv_icm20948_augmented_sensors_update_odr_0: (+1)
   \   000000DA   0x2103             MOVS     R1,#+3
   \   000000DC   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000E0   0x2800             CMP      R0,#+0
   \   000000E2   0xD006             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_9
   \   000000E4   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   000000E8   0x89C0             LDRH     R0,[R0, #+14]
   \   000000EA   0x4601             MOV      R1,R0
   \   000000EC   0x42B9             CMP      R1,R7
   \   000000EE   0xD000             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_9
   \   000000F0   0x4605             MOV      R5,R0
   \                     ??inv_icm20948_augmented_sensors_update_odr_9: (+1)
   \   000000F2   0x210B             MOVS     R1,#+11
   \   000000F4   0x4630             MOV      R0,R6
   \   000000F6   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   000000FA   0x2800             CMP      R0,#+0
   \   000000FC   0xD022             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   000000FE   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   00000102   0x8980             LDRH     R0,[R0, #+12]
   \   00000104   0x4629             MOV      R1,R5
   \   00000106   0x4605             MOV      R5,R0
   \   00000108   0x428D             CMP      R5,R1
   \   0000010A   0xD91B             BLS.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   0000010C   0x460D             MOV      R5,R1
   \   0000010E   0xE019             B.N      ??inv_icm20948_augmented_sensors_update_odr_6
    215          			*updatedDelayPtr = lDelayInMs;
    216          			break;
    217          		case ANDROID_SENSOR_WAKEUP_ORIENTATION:
    218                  case ANDROID_SENSOR_WAKEUP_ROTATION_VECTOR:
    219          			AUGMENTED_SENSOR_GET_9QUATWU_MIN_ODR(s, lDelayInMs);
   \                     ??inv_icm20948_augmented_sensors_update_odr_2: (+1)
   \   00000110   0x2119             MOVS     R1,#+25
   \   00000112   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000116   0x2800             CMP      R0,#+0
   \   00000118   0xD006             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_10
   \   0000011A   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   0000011E   0x8A40             LDRH     R0,[R0, #+18]
   \   00000120   0x4601             MOV      R1,R0
   \   00000122   0x42B9             CMP      R1,R7
   \   00000124   0xD000             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_10
   \   00000126   0x4605             MOV      R5,R0
   \                     ??inv_icm20948_augmented_sensors_update_odr_10: (+1)
   \   00000128   0x211F             MOVS     R1,#+31
   \   0000012A   0x4630             MOV      R0,R6
   \   0000012C   0x.... 0x....      BL       inv_icm20948_ctrl_androidSensor_enabled
   \   00000130   0x2800             CMP      R0,#+0
   \   00000132   0xD007             BEQ.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   00000134   0xF206 0x40DE      ADDW     R0,R6,#+1246
   \   00000138   0x8A00             LDRH     R0,[R0, #+16]
   \   0000013A   0x4629             MOV      R1,R5
   \   0000013C   0x4605             MOV      R5,R0
   \   0000013E   0x428D             CMP      R5,R1
   \   00000140   0xD900             BLS.N    ??inv_icm20948_augmented_sensors_update_odr_6
   \   00000142   0x460D             MOV      R5,R1
    220          			*updatedDelayPtr = lDelayInMs;
   \                     ??inv_icm20948_augmented_sensors_update_odr_6: (+1)
   \   00000144   0x8025             STRH     R5,[R4, #+0]
    221          			break;
    222          		default :
    223          			break;
    224          	}
    225          
    226          }
   \   00000146   0xBDF1             POP      {R0,R4-R7,PC}    ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable0:
   \   00000000   0x00394BB8         DC32     0x394bb8

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   inv_icm20948_augmented_init
      48   inv_icm20948_augmented_sensors_get_gravity
        48   -> inv_icm20948_convert_compute_scalar_part_fxp
        48   -> inv_icm20948_convert_mult_qfix_fxp
        48   -> inv_icm20948_q_mult_q_qi
       4   inv_icm20948_augmented_sensors_get_linearacceleration
      72   inv_icm20948_augmented_sensors_get_orientation
        72   -> inv_icm20948_convert_compute_scalar_part_fxp
        72   -> inv_icm20948_convert_fast_sqrt_fxp
        72   -> inv_icm20948_convert_mult_qfix_fxp
        72   -> inv_icm20948_convert_quat_to_col_major_matrix_fxp
        72   -> inv_icm20948_math_atan2_q15_fxp
      16   inv_icm20948_augmented_sensors_set_odr
        16   -> inv_icm20948_ctrl_androidSensor_enabled
      24   inv_icm20948_augmented_sensors_update_odr
        24   -> inv_icm20948_ctrl_androidSensor_enabled


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable0
      32  inv_icm20948_augmented_init
     150  inv_icm20948_augmented_sensors_get_gravity
      62  inv_icm20948_augmented_sensors_get_linearacceleration
     156  inv_icm20948_augmented_sensors_get_orientation
     772  inv_icm20948_augmented_sensors_set_odr
     328  inv_icm20948_augmented_sensors_update_odr

 
 1 504 bytes in section .text
 
 1 504 bytes of CODE memory

Errors: none
Warnings: none
